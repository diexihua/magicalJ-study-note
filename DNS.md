# DNS（Domain Name System 域名系统）

DNS 的核心系统是一个三层的树状、分布式服务，主要用于域名与 IP 地址的相互转换，基本对应域名的结构：

- **根域名服务器（Root DNS Server）**：管理顶级域名服务器，返回“com”“net”“cn”等顶级域名服务器的 IP 地址；
- **顶级域名服务器（Top-level DNS Server）**：管理各自域名下的权威域名服务器，比如 com 顶级域名服务器可以返回 github.com 域名服务器的 IP 地址；
- **权威域名服务器（Authoritative DNS Server）**：管理自己域名下主机的 IP 地址，比如 github.com 权威域名服务器可以返回 www.github.com 的 IP 地址。

## 缓存

为了减轻域名解析的压力，并且能够更快地获取结果，基本思路就是**缓存**。

**非权威域名服务器**：许多大公司、网络运行商都会建立自己的 DNS 服务器，作为用户 DNS 查询的代理，代替用户访问核心 DNS 系统。这些服务器被称为**非权威域名服务器**，可以缓存之前的查询结果，如果已经有了记录，就无需再向根服务器发起查询，直接返回对应的 IP 地址

操作系统里也会对 DNS 解析结果做缓存

操作系统里还有一个 hosts 文件，在 Linux 里是“/etc/hosts”，在 Windows 里是“C:\WINDOWS\system32\drivers\etc\hosts”，如果操作系统在缓存里找不到 DNS 记录，就会找这个文件。

## DNS解析过程

1. 浏览器缓存
2. 操作系统缓存
3. 本地 hosts 文件
4. 非权威域名服务器查询
5. 根域名服务器查询
6. 顶级域名服务器查询
7. 权威域名服务器查询
